services:
  doris-webhook:
    build:
      context: .
      dockerfile: Dockerfile
    # image: ghcr.io/kevin197011/doris-webhook:latest
    container_name: doris-webhook
    ports:
      - "8080:8080"
    environment:
      # Doris 配置
      - DORIS_BE_HTTP=${DORIS_BE_HTTP:-10.170.2.56:8040}
      - DORIS_DATABASE=${DORIS_DATABASE:-video}
      - DORIS_USER=${DORIS_USER:-devops}
      - DORIS_PASSWORD=${DORIS_PASSWORD:-SgU929SiPeLKINX!}
    restart: unless-stopped
    networks:
      - doris-webhook-network
    # 健康检查（可选，需要安装 netcat-openbsd）
    # healthcheck:
    #   test: ["CMD-SHELL", "nc -z localhost 8080 || exit 1"]
    #   interval: 30s
    #   timeout: 10s
    #   retries: 3
    #   start_period: 10s

networks:
  doris-webhook-network:
    driver: bridge

